#!/usr/bin/env python
"""Print all the fields for the indicated /proc/net file

"""

import sys
import ProcSysInfo
    
if sys.platform == "darwin":
    print "MacOS doesn't have a '/proc' filesystem, quitting."
    sys.exit(0)

qualify = ""

if len(sys.argv) > 1:
    target = sys.argv[1]
    if len(sys.argv) > 2:
        qualify = sys.argv[2]
else:
    target = "tcp"

seq = 0

handler = ProcSysInfo.GetProcFileHandler(target)

if qualify != "":
    active = handler(qualify)
else:
    active = handler()

if qualify != "":
    target = target + "/" + qualify

print "- Logical records from {0:s}".format(target)

for srec in active:
    seq = seq + 1
    if len(active.field) > 0:
        print "- Record {0:d} fields {1:d}".format(seq,len(active.field))

        fseq = 0
        for off in active.field:
            fseq = fseq + 1
            currval = active.field[off]
            if type(currval) == str or type(currval) == int or type(currval) == long:
                print "- - - {0:d}. {1:s} : {2:s}".format(fseq,off,str(currval))
            elif type(currval) == dict:
                subseq = 0
                print "- - - {0:d}. {1:s} ...".format(fseq,off)
                for subent in currval:
                    subseq = subseq + 1
                    if type(subent) == str:
                        print "- - - - - {0:d}.{1:d}. {2:s} : {3:s}".format(fseq,subseq,subent,str(currval[subent]))
